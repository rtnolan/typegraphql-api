"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = __importDefault(require("fs"));
const debug_1 = __importDefault(require("debug"));
const debug = debug_1.default('plusX');
function plusX(file) {
    const s = fs_1.default.statSync(file);
    const newMode = s.mode | 64 | 8 | 1;
    if (s.mode === newMode) {
        debug(`Execution permissions of ${file} are fine`);
        return;
    }
    const base8 = newMode.toString(8).slice(-3);
    debug(`Have to call plusX on ${file}`);
    fs_1.default.chmodSync(file, base8);
}
exports.plusX = plusX;
function fixPlatforms(platforms, platform) {
    platforms = platforms || [];
    if (!platforms.includes('native')) {
        return ['native', ...platforms];
    }
    return [...platforms, platform];
}
exports.fixPlatforms = fixPlatforms;
//# sourceMappingURL=util.js.map